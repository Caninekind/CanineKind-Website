<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Training Sessions - CanineKind Client Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #D1E5F4 0%, #e8f4f8 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Portal Header */
        .portal-header {
            background: linear-gradient(135deg, #799972 0%, #8aaa83 100%);
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .portal-logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .portal-logo img {
            height: 50px;
            width: auto;
        }

        .portal-logo h1 {
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .portal-nav {
            display: flex;
            gap: 1.5rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .portal-nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 5px;
        }

        .portal-nav a:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .portal-nav a.active {
            background: rgba(255, 255, 255, 0.3);
            font-weight: 600;
        }

        .sign-out-link {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
            padding: 0.4rem 0.8rem;
        }

        .sign-out-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
        }

        /* Page Container */
        .page-container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .page-header {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .page-header h2 {
            color: #799972;
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .page-header p {
            color: #666;
            font-size: 1.1em;
        }

        /* Section Headers */
        .section-header {
            background: white;
            padding: 20px 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section-header h3 {
            color: #799972;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .section-header p {
            color: #666;
            font-size: 0.95em;
        }

        /* Sessions Grid */
        .sessions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .session-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-left: 5px solid #4a90e2;
            cursor: pointer;
        }

        .session-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .session-card.upcoming {
            border-left-color: #4a90e2;
        }

        .session-card.completed {
            border-left-color: #51cf66;
            opacity: 0.85;
        }

        .session-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .session-date {
            font-size: 1.3em;
            color: #333;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .session-time {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 12px;
        }

        .session-type {
            display: inline-block;
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .session-status {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            font-size: 0.9em;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state h3 {
            color: #666;
            margin-bottom: 10px;
        }

        .empty-state p {
            color: #999;
            margin-bottom: 20px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #799972 0%, #8aaa83 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(121, 153, 114, 0.3);
        }

        /* Admin Notice (hidden for now, will be used in admin version) */
        .admin-notice {
            background: linear-gradient(135deg, #ffd700 0%, #ffa500 100%);
            color: #333;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none; /* Hidden in client view */
        }

        .admin-notice.show {
            display: block;
        }

        /* Admin Panel Styles */
        .admin-panel {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border: 3px solid #799972;
        }

        .panel-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }

        .panel-header h3 {
            color: #799972;
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .panel-header p {
            color: #666;
            font-size: 1em;
        }

        .access-control-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
        }

        .form-control {
            padding: 12px 15px;
            border: 2px solid #d0d0d0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: #799972;
            box-shadow: 0 0 0 3px rgba(121, 153, 114, 0.1);
        }

        .access-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        .access-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }

        .access-section h4 {
            color: #799972;
            font-size: 1.3em;
            margin-bottom: 8px;
        }

        .section-description {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .level-checkboxes,
        .goal-checkboxes {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .checkbox-label:hover {
            background: #e8f5e9;
            border-color: #799972;
        }

        .checkbox-label input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #799972;
        }

        .checkbox-text {
            font-size: 1em;
            color: #333;
            font-weight: 500;
        }

        .goal-checkbox-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .goal-level-badge {
            background: #799972;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            padding-top: 10px;
        }

        .btn-save {
            flex: 1;
            background: linear-gradient(135deg, #799972 0%, #8aaa83 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(121, 153, 114, 0.3);
        }

        .btn-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(121, 153, 114, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #799972;
            border: 2px solid #799972;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: #f0f0f0;
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .portal-nav {
                gap: 0.5rem;
                font-size: 0.9rem;
                justify-content: center;
            }

            .portal-nav a {
                padding: 0.4rem 0.8rem;
                font-size: 0.85rem;
            }

            .sign-out-link {
                font-size: 0.75rem;
                padding: 0.3rem 0.6rem;
                opacity: 0.6;
                margin-left: 1rem;
            }

            .page-header h2 {
                font-size: 1.8em;
            }

            .sessions-grid {
                grid-template-columns: 1fr;
            }

            .access-sections {
                grid-template-columns: 1fr;
            }

            .admin-panel {
                padding: 20px;
            }

            .form-actions {
                flex-direction: column;
            }

            .btn-save,
            .btn-secondary {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Portal Header -->
    <header class="portal-header">
        <div class="header-content">
            <div class="portal-logo">
                <img src="https://i.imgur.com/OXiQWa3.jpeg" alt="CanineKind Logo">
                <h1>Client Portal</h1>
            </div>
            <nav class="portal-nav">
                <a href="portal-dashboard.html">Dashboard</a>
                <a href="portal-sessions.html" class="active">Sessions</a>
                <a href="portal-forms.html">Forms & Documents</a>
                <a href="portal-schedule.html">Daily Schedule</a>
                <a href="portal-goals.html">Goals</a>
                <a href="#" class="sign-out-link" onclick="signOut(); return false;">Sign Out</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="page-container">
        <!-- Page Header -->
        <div class="page-header">
            <h2>Training Sessions</h2>
            <p>View your upcoming and past training sessions</p>
        </div>

        <!-- Admin Notice (will be visible in admin version) -->
        <div class="admin-notice" id="adminNotice">
            <strong>ðŸ‘‘ Admin View:</strong> You can manage all client sessions. Click on a session to edit notes and homework.
        </div>

        <!-- Admin Goal Access Control Panel -->
        <div class="admin-panel" id="adminPanel" style="display: none;">
            <div class="panel-header">
                <h3>Goal Access Management</h3>
                <p>Grant clients access to training goal levels or specific goals</p>
            </div>

            <div class="access-control-form">
                <div class="form-group">
                    <label for="clientSelect">Select Client:</label>
                    <select id="clientSelect" class="form-control">
                        <option value="">-- Choose a client --</option>
                    </select>
                </div>

                <div class="access-sections">
                    <!-- Level Access Section -->
                    <div class="access-section">
                        <h4>Level Access</h4>
                        <p class="section-description">Grant access to all goals in a level</p>
                        <div class="level-checkboxes" id="levelCheckboxes">
                            <label class="checkbox-label">
                                <input type="checkbox" value="1" class="level-checkbox">
                                <span class="checkbox-text">Level 1: Basic/Beginner Commands</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="2" class="level-checkbox">
                                <span class="checkbox-text">Level 2: Intermediate Commands</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="3" class="level-checkbox">
                                <span class="checkbox-text">Level 3: Advanced Commands</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="4" class="level-checkbox">
                                <span class="checkbox-text">Level 4: Expert/Specialized</span>
                            </label>
                        </div>
                    </div>

                    <!-- Individual Goal Access Section -->
                    <div class="access-section">
                        <h4>Individual Goal Access</h4>
                        <p class="section-description">Grant access to specific goals (overrides level settings)</p>
                        <div class="goal-checkboxes" id="goalCheckboxes">
                            <!-- Will be populated dynamically -->
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button class="btn-save" onclick="saveGoalAccess()">Save Access Settings</button>
                    <button class="btn-secondary" onclick="loadClientAccess()">Refresh</button>
                </div>
            </div>
        </div>

        <!-- Upcoming Sessions Section -->
        <div class="section-header">
            <h3>Upcoming Sessions</h3>
            <p>Your scheduled training appointments</p>
        </div>

        <div class="sessions-grid" id="upcomingSessions">
            <!-- Upcoming sessions will be loaded here -->
        </div>

        <!-- Past Sessions Section -->
        <div class="section-header">
            <h3>ðŸ“‹ Past Sessions</h3>
            <p>Review previous training sessions and notes</p>
        </div>

        <div class="sessions-grid" id="pastSessions">
            <!-- Past sessions will be loaded here -->
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <div class="empty-state-icon"></div>
            <h3>No Sessions Scheduled</h3>
            <p>You don't have any training sessions scheduled yet.</p>
            <a href="https://book.squareup.com/appointments/yxzgsmqobnwc1j/location/L8H5N5KVRNVAH/services" target="_blank" class="btn-primary">Book Your First Session</a>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Firebase Config -->
    <script src="firebase-config.js"></script>

    <script>
        let currentUser = null;
        let isAdmin = false;
        let allClients = [];
        let selectedClientEmail = '';

        // Define all goals with their levels
        const GOALS_STRUCTURE = {
            1: [
                { id: 'sit', title: 'Sit' },
                { id: 'down', title: 'Down' },
                { id: 'recall', title: 'Recall' },
                { id: 'markers-release', title: 'Markers & Release Words' },
                { id: 'place', title: 'Place' },
                { id: 'crate-manners', title: 'Crate Manners' }
            ],
            2: [
                { id: 'stay', title: 'Stay' },
                { id: 'heel', title: 'Heel' },
                { id: 'leave-it', title: 'Leave It' },
                { id: 'drop-it', title: 'Drop It' }
            ],
            3: [
                { id: 'distance-commands', title: 'Distance Commands' },
                { id: 'duration-work', title: 'Duration Work' },
                { id: 'distractions', title: 'Working with Distractions' }
            ],
            4: [
                { id: 'off-leash', title: 'Off-Leash Reliability' },
                { id: 'advanced-behaviors', title: 'Advanced Behaviors' }
            ]
        };

        // Initialize Firebase and check authentication
        document.addEventListener('DOMContentLoaded', async () => {
            const initialized = initializeFirebase();

            if (!initialized) {
                alert('Failed to initialize Firebase');
                window.location.href = 'portal-login.html';
                return;
            }

            // Check authentication
            auth.onAuthStateChanged(async (user) => {
                if (!user) {
                    window.location.href = 'portal-login.html';
                } else {
                    currentUser = user;

                    // Check if user is admin
                    isAdmin = await isUserAdmin();
                    if (isAdmin) {
                        document.getElementById('adminNotice').classList.add('show');
                        document.getElementById('adminPanel').style.display = 'block';
                        await loadAdminPanel();
                    }

                    await loadSessions();
                }
            });
        });

        // Load admin panel data
        async function loadAdminPanel() {
            try {
                // Load all clients
                const usersSnapshot = await db.collection('users').get();
                allClients = usersSnapshot.docs
                    .map(doc => ({
                        email: doc.id,
                        ...doc.data()
                    }))
                    .filter(user => user.role !== 'admin'); // Filter out admins

                // Populate client dropdown
                const clientSelect = document.getElementById('clientSelect');
                clientSelect.innerHTML = '<option value="">-- Choose a client --</option>' +
                    allClients.map(client =>
                        `<option value="${client.email}">${client.displayName || client.email}</option>`
                    ).join('');

                // Add event listener for client selection
                clientSelect.addEventListener('change', async (e) => {
                    selectedClientEmail = e.target.value;
                    if (selectedClientEmail) {
                        await loadClientAccess();
                    }
                });

                // Populate individual goals checkboxes
                populateGoalCheckboxes();

            } catch (error) {
                console.error('Error loading admin panel:', error);
                alert('Error loading admin panel');
            }
        }

        // Populate individual goal checkboxes
        function populateGoalCheckboxes() {
            const container = document.getElementById('goalCheckboxes');
            let html = '';

            for (let level = 1; level <= 4; level++) {
                const goals = GOALS_STRUCTURE[level];
                goals.forEach(goal => {
                    html += `
                        <label class="checkbox-label">
                            <input type="checkbox" value="${goal.id}" data-level="${level}" class="goal-checkbox">
                            <div class="goal-checkbox-item">
                                <span class="checkbox-text">${goal.emoji} ${goal.title}</span>
                                <span class="goal-level-badge">L${level}</span>
                            </div>
                        </label>
                    `;
                });
            }

            container.innerHTML = html;
        }

        // Load client's current access settings
        async function loadClientAccess() {
            if (!selectedClientEmail) return;

            try {
                const accessDoc = await db.collection('users')
                    .doc(selectedClientEmail)
                    .collection('goalAccess')
                    .doc('settings')
                    .get();

                // Clear all checkboxes first
                document.querySelectorAll('.level-checkbox').forEach(cb => cb.checked = false);
                document.querySelectorAll('.goal-checkbox').forEach(cb => cb.checked = false);

                if (accessDoc.exists) {
                    const accessData = accessDoc.data();

                    // Check level checkboxes
                    if (accessData.levels && Array.isArray(accessData.levels)) {
                        accessData.levels.forEach(level => {
                            const checkbox = document.querySelector(`.level-checkbox[value="${level}"]`);
                            if (checkbox) checkbox.checked = true;
                        });
                    }

                    // Check individual goal checkboxes
                    if (accessData.individualGoals && Array.isArray(accessData.individualGoals)) {
                        accessData.individualGoals.forEach(goalId => {
                            const checkbox = document.querySelector(`.goal-checkbox[value="${goalId}"]`);
                            if (checkbox) checkbox.checked = true;
                        });
                    }
                }

            } catch (error) {
                console.error('Error loading client access:', error);
                alert('Error loading client access settings');
            }
        }

        // Save goal access settings
        async function saveGoalAccess() {
            if (!selectedClientEmail) {
                alert('Please select a client first');
                return;
            }

            try {
                // Get selected levels
                const selectedLevels = Array.from(document.querySelectorAll('.level-checkbox:checked'))
                    .map(cb => parseInt(cb.value));

                // Get selected individual goals
                const selectedGoals = Array.from(document.querySelectorAll('.goal-checkbox:checked'))
                    .map(cb => cb.value);

                // Save to Firestore
                await db.collection('users')
                    .doc(selectedClientEmail)
                    .collection('goalAccess')
                    .doc('settings')
                    .set({
                        levels: selectedLevels,
                        individualGoals: selectedGoals,
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                        updatedBy: currentUser.email
                    });

                alert('Goal access settings saved successfully!');

            } catch (error) {
                console.error('Error saving goal access:', error);
                alert('Error saving goal access settings. Please try again.');
            }
        }

        // Load sessions for the user
        async function loadSessions() {
            const upcomingGrid = document.getElementById('upcomingSessions');
            const pastGrid = document.getElementById('pastSessions');
            const emptyState = document.getElementById('emptyState');

            try {
                // TODO: Fetch sessions from Firestore
                // For now, we'll use placeholder data structure
                // Real implementation will query Firestore for sessions

                // Firestore structure will be:
                // sessions/{sessionId}
                //   - clientEmail: string
                //   - date: timestamp
                //   - type: string
                //   - status: 'scheduled' | 'completed' | 'cancelled'
                //   - duration: number (minutes)
                //   - notes: object { pre, during, post }
                //   - homework: array

                const sessions = await fetchUserSessions();

                if (sessions.length === 0) {
                    upcomingGrid.innerHTML = '';
                    pastGrid.innerHTML = '';
                    emptyState.style.display = 'block';
                    return;
                }

                emptyState.style.display = 'none';

                // Separate upcoming and past sessions
                const now = new Date();
                const upcoming = sessions.filter(s => s.date > now);
                const past = sessions.filter(s => s.date <= now);

                // Render upcoming sessions
                if (upcoming.length > 0) {
                    upcomingGrid.innerHTML = upcoming.map(session => renderSessionCard(session, 'upcoming')).join('');
                } else {
                    upcomingGrid.innerHTML = '<div class="empty-state"><p style="color: #999;">No upcoming sessions</p></div>';
                }

                // Render past sessions
                if (past.length > 0) {
                    pastGrid.innerHTML = past.map(session => renderSessionCard(session, 'completed')).join('');
                } else {
                    pastGrid.innerHTML = '<div class="empty-state"><p style="color: #999;">No past sessions</p></div>';
                }

            } catch (error) {
                console.error('Error loading sessions:', error);
                upcomingGrid.innerHTML = '<div class="empty-state"><p style="color: #dc3545;">Error loading sessions. Please refresh.</p></div>';
            }
        }

        // Fetch user sessions from Firestore
        async function fetchUserSessions() {
            // TODO: Implement Firestore query
            // For now, return empty array (skeleton mode)

            /* Future implementation:
            const sessionsRef = db.collection('sessions');
            let query;

            if (isAdmin) {
                // Admin sees all sessions
                query = sessionsRef.orderBy('date', 'desc');
            } else {
                // Client sees only their sessions
                query = sessionsRef
                    .where('clientEmail', '==', currentUser.email)
                    .orderBy('date', 'desc');
            }

            const snapshot = await query.get();
            return snapshot.docs.map(doc => ({
                id: doc.id,
                ...doc.data(),
                date: doc.data().date.toDate()
            }));
            */

            return []; // Empty for now
        }

        // Render a session card
        function renderSessionCard(session, status) {
            const dateStr = session.date.toLocaleDateString('en-US', {
                weekday: 'short',
                month: 'short',
                day: 'numeric'
            });
            const timeStr = session.date.toLocaleTimeString('en-US', {
                hour: 'numeric',
                minute: '2-digit'
            });

            const statusText = status === 'upcoming' ? 'Scheduled' : 'Completed';

            return `
                <div class="session-card ${status}" onclick="viewSession('${session.id}')">
                    <div class="session-status-badge">${statusText}</div>
                    <div class="session-date">${dateStr}</div>
                    <div class="session-time">${timeStr}</div>
                    <div class="session-type">${session.type || 'Training Session'}</div>
                    <div class="session-status">
                        <span>${statusText}</span>
                        ${session.duration ? `â€¢ ${session.duration} minutes` : ''}
                    </div>
                </div>
            `;
        }

        // View session details (will be implemented later)
        function viewSession(sessionId) {
            // TODO: Navigate to session detail page or open modal
            console.log('View session:', sessionId);
            alert('Session details view coming soon!');

            /* Future implementation:
            window.location.href = `portal-session-detail.html?id=${sessionId}`;
            */
        }

        // Sign out function
        async function signOut() {
            try {
                await firebase.auth().signOut();
                window.location.href = 'portal-login.html';
            } catch (error) {
                console.error('Error signing out:', error);
            }
        }

        /*
        ==============================================
        ADMIN VERSION NOTES (for future implementation)
        ==============================================

        Admin-specific features to add:
        1. Button to "Create New Session"
        2. Ability to edit session notes
        3. View all clients' sessions (not filtered)
        4. Add session homework/tasks
        5. Upload photos/videos to sessions
        6. Mark sessions as completed/cancelled

        Suggested admin page: portal-sessions-admin.html
        - Same layout but with admin controls
        - Create/Edit/Delete sessions
        - Bulk actions
        */
    </script>
</body>
</html>
